{"version":3,"file":"Fields-ea2aa0dd.js","sources":["../../../../frontend/src/components/Icons/SuccessIcon.vue","../../../../frontend/src/components/DropdownItem.vue","../../../../frontend/src/components/Fields.vue"],"sourcesContent":["<template>\n  <svg\n    width=\"16\"\n    height=\"16\"\n    viewBox=\"0 0 16 16\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      fill-rule=\"evenodd\"\n      clip-rule=\"evenodd\"\n      d=\"M14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8ZM15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1C11.866 1 15 4.13401 15 8ZM11.2909 5.98482C11.4666 5.77175 11.4363 5.45663 11.2232 5.28096C11.0101 5.1053 10.695 5.13561 10.5193 5.34868L7.07001 9.53239L5.72845 7.79857C5.55946 7.58018 5.24543 7.54012 5.02703 7.70911C4.80863 7.8781 4.76858 8.19214 4.93756 8.41053L6.66217 10.6394C6.7552 10.7596 6.89788 10.831 7.04988 10.8334C7.20188 10.8357 7.3467 10.7688 7.4434 10.6515L11.2909 5.98482Z\"\n      fill=\"currentColor\"\n    />\n  </svg>\n</template>\n","<template>\n  <div\n    class=\"group flex w-full items-center justify-between rounded bg-transparent p-1 pl-2 text-base text-gray-800 transition-colors hover:bg-gray-200 active:bg-gray-300\"\n  >\n    <div class=\"flex items-center justify-between gap-7\">\n      <div v-show=\"!editMode\">{{ option.value }}</div>\n      <TextInput\n        ref=\"inputRef\"\n        v-show=\"editMode\"\n        v-model=\"option.value\"\n        class=\"w-full\"\n        :placeholder=\"option.placeholder\"\n        @blur.stop=\"saveOption\"\n        @keydown.enter.stop=\"(e) => e.target.blur()\"\n      />\n\n      <div class=\"actions flex items-center justify-center\">\n        <Tooltip text=\"Set As Primary\" v-if=\"!isNew && !option.selected\">\n          <div>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              class=\"opacity-0 hover:bg-gray-300 group-hover:opacity-100\"\n              @click=\"option.onClick\"\n            >\n              <SuccessIcon />\n            </Button>\n          </div>\n        </Tooltip>\n        <Tooltip text=\"Edit\">\n          <div>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              class=\"opacity-0 hover:bg-gray-300 group-hover:opacity-100\"\n              @click=\"toggleEditMode\"\n            >\n              <EditIcon />\n            </Button>\n          </div>\n        </Tooltip>\n        <Tooltip text=\"Delete\">\n          <div>\n            <Button\n              variant=\"ghost\"\n              icon=\"x\"\n              size=\"sm\"\n              class=\"opacity-0 hover:bg-gray-300 group-hover:opacity-100\"\n              @click=\"() => option.onDelete(option, isNew)\"\n            />\n          </div>\n        </Tooltip>\n      </div>\n    </div>\n    <div>\n      <FeatherIcon\n        v-if=\"option.selected\"\n        name=\"check\"\n        class=\"text-primary-500 h-4 w-6\"\n        size=\"sm\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport SuccessIcon from '@/components/Icons/SuccessIcon.vue'\nimport EditIcon from '@/components/Icons/EditIcon.vue'\nimport { TextInput, Tooltip } from 'frappe-ui'\nimport { nextTick, ref, onMounted } from 'vue'\n\nconst props = defineProps({\n  option: {\n    type: Object,\n    default: () => {},\n  },\n})\n\nconst editMode = ref(false)\nconst isNew = ref(false)\nconst inputRef = ref(null)\n\nonMounted(() => {\n  if (!props.option?.value) {\n    editMode.value = true\n    isNew.value = true\n    nextTick(() => inputRef.value.el.focus())\n  }\n})\n\nconst toggleEditMode = () => {\n  editMode.value = !editMode.value\n  editMode.value && nextTick(() => inputRef.value.el.focus())\n}\n\nconst saveOption = () => {\n  toggleEditMode()\n  props.option.onSave(props.option, isNew.value)\n  isNew.value = false\n}\n</script>\n","<template>\n  <div class=\"flex flex-col gap-4\">\n    <div\n      v-for=\"section in sections\"\n      :key=\"section.label\"\n      class=\"first:border-t-0 first:pt-0\"\n      :class=\"section.hideBorder ? '' : 'border-t pt-4'\"\n    >\n      <div\n        v-if=\"!section.hideLabel\"\n        class=\"flex h-7 mb-3 max-w-fit cursor-pointer items-center gap-2 text-base font-semibold leading-5\"\n      >\n        {{ section.label }}\n      </div>\n      <div\n        class=\"grid gap-4\"\n        :class=\"\n          section.columns\n            ? 'grid-cols-' + section.columns\n            : 'grid-cols-2 sm:grid-cols-3'\n        \"\n      >\n        <div v-for=\"field in section.fields\" :key=\"field.name\">\n          <div\n            v-if=\"\n              field.type == 'Check' ||\n              (field.read_only && data[field.name]) ||\n              !field.read_only || !field.hidden\n            \"\n          >\n            <div\n              v-if=\"field.type != 'Check'\"\n              class=\"mb-2 text-sm text-gray-600\"\n            >\n              {{ __(field.label) }}\n              <span class=\"text-red-500\" v-if=\"field.mandatory\">*</span>\n            </div>\n            <FormControl\n              v-if=\"field.read_only && field.type !== 'Check'\"\n              type=\"text\"\n              :placeholder=\"__(field.placeholder || field.label)\"\n              v-model=\"data[field.name]\"\n              :disabled=\"true\"\n            />\n            <FormControl\n              v-else-if=\"field.type === 'Select'\"\n              type=\"select\"\n              class=\"form-control\"\n              :class=\"field.prefix ? 'prefix' : ''\"\n              :options=\"field.options\"\n              v-model=\"data[field.name]\"\n              :placeholder=\"__(field.placeholder || field.label)\"\n            >\n              <template v-if=\"field.prefix\" #prefix>\n                <IndicatorIcon :class=\"field.prefix\" />\n              </template>\n            </FormControl>\n            <div\n              v-else-if=\"field.type == 'Check'\"\n              class=\"flex items-center gap-2\"\n            >\n              <FormControl\n                class=\"form-control\"\n                type=\"checkbox\"\n                v-model=\"data[field.name]\"\n                @change=\"(e) => (data[field.name] = e.target.checked)\"\n                :disabled=\"Boolean(field.read_only)\"\n              />\n              <label\n                class=\"text-sm text-gray-600\"\n                @click=\"data[field.name] = !data[field.name]\"\n              >\n                {{ __(field.label) }}\n                <span class=\"text-red-500\" v-if=\"field.mandatory\">*</span>\n              </label>\n            </div>\n            <Link\n              v-else-if=\"field.type === 'Link'\"\n              class=\"form-control\"\n              :value=\"data[field.name]\"\n              :doctype=\"field.options\"\n              @change=\"(v) => (data[field.name] = v)\"\n              :placeholder=\"__(field.placeholder || field.label)\"\n              :onCreate=\"field.create\"\n            />\n            <Link\n              v-else-if=\"field.type === 'User'\"\n              class=\"form-control\"\n              :value=\"getUser(data[field.name]).full_name\"\n              :doctype=\"field.options\"\n              @change=\"(v) => (data[field.name] = v)\"\n              :placeholder=\"__(field.placeholder || field.label)\"\n              :hideMe=\"true\"\n            >\n              <template #prefix>\n                <UserAvatar class=\"mr-2\" :user=\"data[field.name]\" size=\"sm\" />\n              </template>\n              <template #item-prefix=\"{ option }\">\n                <UserAvatar class=\"mr-2\" :user=\"option.value\" size=\"sm\" />\n              </template>\n              <template #item-label=\"{ option }\">\n                <Tooltip :text=\"option.value\">\n                  <div class=\"cursor-pointer\">\n                    {{ getUser(option.value).full_name }}\n                  </div>\n                </Tooltip>\n              </template>\n            </Link>\n            <div v-else-if=\"field.type === 'Dropdown'\">\n              <NestedPopover>\n                <template #target=\"{ open }\">\n                  <Button\n                    :label=\"data[field.name]\"\n                    class=\"dropdown-button flex w-full items-center justify-between rounded border border-gray-100 bg-gray-100 px-2 py-1.5 text-base text-gray-800 placeholder-gray-500 transition-colors hover:border-gray-200 hover:bg-gray-200 focus:border-gray-500 focus:bg-white focus:shadow-sm focus:outline-none focus:ring-0 focus-visible:ring-2 focus-visible:ring-gray-400\"\n                  >\n                    <div class=\"truncate\">{{ data[field.name] }}</div>\n                    <template #suffix>\n                      <FeatherIcon\n                        :name=\"open ? 'chevron-up' : 'chevron-down'\"\n                        class=\"h-4 text-gray-600\"\n                      />\n                    </template>\n                  </Button>\n                </template>\n                <template #body>\n                  <div\n                    class=\"my-2 space-y-1.5 divide-y rounded-lg border border-gray-100 bg-white p-1.5 shadow-xl\"\n                  >\n                    <div>\n                      <DropdownItem\n                        v-if=\"field.options?.length\"\n                        v-for=\"option in field.options\"\n                        :key=\"option.name\"\n                        :option=\"option\"\n                      />\n                      <div v-else>\n                        <div class=\"p-1.5 px-7 text-base text-gray-500\">\n                          {{ __('No {0} Available', [field.label]) }}\n                        </div>\n                      </div>\n                    </div>\n                    <div class=\"pt-1.5\">\n                      <Button\n                        variant=\"ghost\"\n                        class=\"w-full !justify-start\"\n                        :label=\"__('Create New')\"\n                        @click=\"field.create()\"\n                      >\n                        <template #prefix>\n                          <FeatherIcon name=\"plus\" class=\"h-4\" />\n                        </template>\n                      </Button>\n                    </div>\n                  </div>\n                </template>\n              </NestedPopover>\n            </div>\n            <DateTimePicker\n              v-else-if=\"field.type === 'Datetime'\"\n              v-model=\"data[field.name]\"\n              :placeholder=\"__(field.placeholder || field.label)\"\n              input-class=\"border-none\"\n            />\n            <DatePicker\n              v-else-if=\"field.type === 'Date'\"\n              v-model=\"data[field.name]\"\n              :placeholder=\"__(field.placeholder || field.label)\"\n              input-class=\"border-none\"\n            />\n            <FormControl\n              v-else-if=\"\n                ['Small Text', 'Text', 'Long Text'].includes(field.type)\n              \"\n              type=\"textarea\"\n              :placeholder=\"__(field.placeholder || field.label)\"\n              v-model=\"data[field.name]\"\n            />\n            <FormControl\n              v-else-if=\"['Int'].includes(field.type)\"\n              type=\"number\"\n              :placeholder=\"__(field.placeholder || field.label)\"\n              v-model=\"data[field.name]\"\n            />\n            <FormControl\n              v-else\n              type=\"text\"\n              :placeholder=\"__(field.placeholder || field.label)\"\n              v-model=\"data[field.name]\"\n              :disabled=\"Boolean(field.read_only)\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport NestedPopover from '@/components/NestedPopover.vue'\nimport DropdownItem from '@/components/DropdownItem.vue'\nimport IndicatorIcon from '@/components/Icons/IndicatorIcon.vue'\nimport UserAvatar from '@/components/UserAvatar.vue'\nimport Link from '@/components/Controls/Link.vue'\nimport { usersStore } from '@/stores/users'\nimport { Tooltip, DatePicker, DateTimePicker } from 'frappe-ui'\n\nconst { getUser } = usersStore()\n\nconst props = defineProps({\n  sections: Array,\n  data: Object,\n})\n</script>\n\n<style scoped>\n:deep(.form-control.prefix select) {\n  padding-left: 2rem;\n}\n</style>\n"],"names":["_hoisted_1","_sfc_render","_ctx","_cache","_openBlock","_createElementBlock","_createElementVNode","props","__props","editMode","ref","isNew","inputRef","onMounted","_a","nextTick","toggleEditMode","saveOption","getUser","usersStore"],"mappings":"ucAEIA,EAAU,CACV,WACA,YACA,QAAW,YACX,gDALF,SAAAC,EAAAC,EAAAC,EAAA,QAYIC,EAAA,EAAAC,EAAA,MAAAL,EAAAG,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAJAG,EAAmB,OAAA,CACnB,YAAU,UACV,YAAkkB,UAClkB,EAAA,+9BC2DN,MAAMC,EAAQC,EAORC,EAAWC,EAAI,EAAK,EACpBC,EAAQD,EAAI,EAAK,EACjBE,EAAWF,EAAI,IAAI,EAEzBG,EAAU,IAAM,QACTC,EAAAP,EAAM,SAAN,MAAAO,EAAc,QACjBL,EAAS,MAAQ,GACjBE,EAAM,MAAQ,GACdI,EAAS,IAAMH,EAAS,MAAM,GAAG,MAAK,CAAE,EAE5C,CAAC,EAED,MAAMI,EAAiB,IAAM,CAC3BP,EAAS,MAAQ,CAACA,EAAS,MAC3BA,EAAS,OAASM,EAAS,IAAMH,EAAS,MAAM,GAAG,OAAO,CAC5D,EAEMK,EAAa,IAAM,CACvBD,EAAgB,EAChBT,EAAM,OAAO,OAAOA,EAAM,OAAQI,EAAM,KAAK,EAC7CA,EAAM,MAAQ,EAChB,03DC2GA,KAAM,CAAE,QAAAO,CAAS,EAAGC,EAAY"}