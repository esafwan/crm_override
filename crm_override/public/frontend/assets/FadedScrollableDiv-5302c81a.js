import{_ as V,aD as W,b as u,c as v,e as p,M as y,N as f,O as g,n as L,g as _,d as C,w as b,T as F,U as z,aE as H,P as j,aF as I,l as T,i as B,j as N,r as E,t as w,F as x,f as O,q as R,H as A,a as G,G as U}from"./index-82d0b844.js";import{z as M}from"./index-8340263f.js";const q={name:"Popover",inheritAttrs:!1,props:{show:{default:void 0},trigger:{type:String,default:"click"},hoverDelay:{type:Number,default:0},leaveDelay:{type:Number,default:0},placement:{type:String,default:"bottom-start"},popoverClass:[String,Object,Array],transition:{default:null},hideOnBlur:{default:!0}},emits:["open","close","update:show"],expose:["open","close"],data(){return{popoverContainerClass:"body-container",showPopup:!1,targetWidth:null,pointerOverTargetOrPopup:!1}},watch:{show(e){e?this.open():this.close()}},created(){if(!(typeof window>"u")&&!document.getElementById("frappeui-popper-root")){const e=document.createElement("div");e.id="frappeui-popper-root",document.body.appendChild(e)}},mounted(){this.listener=e=>{const o=e.target,i=this.$refs.reference,a=this.$refs.popover;if(o===i||o===a||(i==null?void 0:i.contains(o))||(a==null?void 0:a.contains(o)))return;if(!document.getElementById("frappeui-popper-root").contains(o))return this.close();const d=`.${this.popoverContainerClass}`,m=o==null?void 0:o.closest(d),l=i==null?void 0:i.closest(d);m&&l&&m===l&&this.close()},this.hideOnBlur&&(document.addEventListener("click",this.listener),document.addEventListener("mousedown",this.listener)),this.$nextTick(()=>{this.targetWidth=this.$refs.target.clientWidth})},beforeDestroy(){this.popper&&this.popper.destroy(),document.removeEventListener("click",this.listener),document.removeEventListener("mousedown",this.listener)},computed:{showPropPassed(){return this.show!=null},isOpen:{get(){return this.showPropPassed?this.show:this.showPopup},set(e){e=!!e,this.showPropPassed?this.$emit("update:show",e):this.showPopup=e,e===!1?this.$emit("close"):e===!0&&this.$emit("open")}},popupTransition(){let e={default:{enterActiveClass:"transition duration-150 ease-out",enterFromClass:"translate-y-1 opacity-0",enterToClass:"translate-y-0 opacity-100",leaveActiveClass:"transition duration-150 ease-in",leaveFromClass:"translate-y-0 opacity-100",leaveToClass:"translate-y-1 opacity-0"}};return typeof this.transition=="string"?e[this.transition]:this.transition}},methods:{setupPopper(){this.popper?this.updatePosition():this.popper=W(this.$refs.reference,this.$refs.popover,{placement:this.placement})},updatePosition(){this.popper&&this.popper.update()},togglePopover(e){e instanceof Event&&(e=null),e==null&&(e=!this.isOpen),e=!!e,e?this.open():this.close()},open(){this.isOpen=!0,this.$nextTick(()=>this.setupPopper())},close(){this.isOpen=!1},onMouseover(){this.pointerOverTargetOrPopup=!0,this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.trigger==="hover"&&(this.hoverDelay?this.hoverTimer=setTimeout(()=>{this.pointerOverTargetOrPopup&&this.open()},Number(this.hoverDelay)*1e3):this.open())},onMouseleave(e){this.pointerOverTargetOrPopup=!1,this.hoverTimer&&(clearTimeout(this.hoverTimer),this.hoverTimer=null),this.trigger==="hover"&&(this.leaveTimer&&clearTimeout(this.leaveTimer),this.leaveDelay?this.leaveTimer=setTimeout(()=>{this.pointerOverTargetOrPopup||this.close()},Number(this.leaveDelay)*1e3):this.pointerOverTargetOrPopup||this.close())}}},K={ref:"reference"},J={class:"rounded-lg border border-gray-100 bg-white shadow-xl"};function Q(e,o,i,a,r,t){return u(),v("div",K,[p("div",{ref:"target",class:L(["flex",e.$attrs.class]),onClick:o[0]||(o[0]=(...n)=>t.updatePosition&&t.updatePosition(...n)),onFocusin:o[1]||(o[1]=(...n)=>t.updatePosition&&t.updatePosition(...n)),onKeydown:o[2]||(o[2]=(...n)=>t.updatePosition&&t.updatePosition(...n)),onMouseover:o[3]||(o[3]=(...n)=>t.onMouseover&&t.onMouseover(...n)),onMouseleave:o[4]||(o[4]=(...n)=>t.onMouseleave&&t.onMouseleave(...n))},[y(e.$slots,"target",f(g({togglePopover:t.togglePopover,updatePosition:t.updatePosition,open:t.open,close:t.close,isOpen:t.isOpen})))],34),(u(),_(I,{to:"#frappeui-popper-root"},[p("div",{ref:"popover",class:L(["relative z-[100]",[r.popoverContainerClass,i.popoverClass]]),style:j({minWidth:r.targetWidth?r.targetWidth+"px":null}),onMouseover:o[5]||(o[5]=n=>r.pointerOverTargetOrPopup=!0),onMouseleave:o[6]||(o[6]=(...n)=>t.onMouseleave&&t.onMouseleave(...n))},[C(H,f(g(t.popupTransition)),{default:b(()=>[F(p("div",null,[y(e.$slots,"body",f(g({togglePopover:t.togglePopover,updatePosition:t.updatePosition,open:t.open,close:t.close,isOpen:t.isOpen})),()=>[p("div",J,[y(e.$slots,"body-main",f(g({togglePopover:t.togglePopover,updatePosition:t.updatePosition,open:t.open,close:t.close,isOpen:t.isOpen})))])])],512),[[z,t.isOpen]])]),_:3},16)],38)]))],512)}const X=V(q,[["render",Q]]),Y={class:"text-base"},Z={key:0,class:"flex items-center justify-center gap-2 rounded-full bg-white px-2 py-1 shadow-sm"},$=["onClick"],ee={key:1,class:"my-3 max-w-max transform bg-white px-4 sm:px-0"},te={class:"relative max-h-96 overflow-y-auto rounded-lg pb-3 shadow-2xl ring-1 ring-black ring-opacity-5"},oe={class:"flex gap-2 px-3 pb-1 pt-3"},se={class:"flex-1"},ie={class:"sticky top-0 bg-white pb-2 pt-3 text-sm text-gray-700"},re={class:"grid w-96 grid-cols-12 place-items-center"},ne=["onClick","title"],ue={__name:"IconPicker",props:{modelValue:{},modelModifiers:{},reaction:{},reactionModifiers:{}},emits:["update:modelValue","update:reaction"],setup(e,{expose:o}){const i=T(""),a=B(e,"modelValue"),r=B(e,"reaction"),t=T(["👍","❤️","😂","😮","😢","🙏"]),n=N(()=>{let l={};for(let s of M){if(i.value&&![s.description,...s.names,...s.tags].join(" ").toLowerCase().includes(i.value.toLowerCase()))continue;let c=l[s.category];c||(l[s.category]=[],c=l[s.category]),c.push(s)}return Object.keys(l).length||(l["No results"]=[]),l});function d(){let l=M.length,s=m(0,l-1);a.value=M[s].emoji}function m(l,s){return Math.floor(Math.random()*(s-l+1)+l)}return o({setRandom:d}),(l,s)=>{const c=E("Button"),S=E("FormControl");return u(),_(X,{transition:"default"},{target:b(({togglePopover:P,isOpen:h})=>[y(l.$slots,"default",f(g({isOpen:h,togglePopover:P})),()=>[p("span",Y,w(e.modelValue||""),1)])]),body:b(({togglePopover:P})=>[r.value?(u(),v("div",Z,[(u(!0),v(x,null,O(t.value,h=>(u(),v("div",{class:"size-5 cursor-pointer rounded-full bg-white text-xl",key:h,onClick:()=>(a.value=h)&&P()},[p("button",null,w(h),1)],8,$))),128)),C(c,{class:"rounded-full",icon:"plus",onClick:s[0]||(s[0]=R(()=>r.value=!1,["stop"]))})])):(u(),v("div",ee,[p("div",te,[p("div",oe,[p("div",se,[C(S,{type:"text",placeholder:"Search by keyword",modelValue:i.value,"onUpdate:modelValue":s[1]||(s[1]=h=>i.value=h),debounce:300},null,8,["modelValue"])]),C(c,{onClick:d},{default:b(()=>s[2]||(s[2]=[A("Random")])),_:1})]),s[3]||(s[3]=p("div",{class:"w-96"},null,-1)),(u(!0),v(x,null,O(n.value,(h,D)=>(u(),v("div",{class:"px-3",key:D},[p("div",ie,w(D),1),p("div",re,[(u(!0),v(x,null,O(h,k=>(u(),v("button",{class:"h-8 w-8 rounded-md p-1 text-2xl hover:bg-gray-100 focus:outline-none focus:ring focus:ring-blue-200",key:k.description,onClick:()=>(a.value=k.emoji)&&P(),title:k.description},w(k.emoji),9,ne))),128))])]))),128))])]))]),_:3})}}},pe={__name:"FadedScrollableDiv",props:{as:{type:String,default:"div"},maskLength:{type:Number,default:30},orientation:{type:String,default:"vertical"}},setup(e){const o=e,i=T(null),a=T("none"),r=N(()=>o.orientation=="horizontal"?"right":"bottom");function t(){if(!i.value)return;let n=i.value.scrollWidth,d=i.value.clientWidth,m=i.value.scrollHeight,l=i.value.clientHeight,s=i.value.scrollTop,c=i.value.scrollLeft;a.value="none",(r.value=="right"&&n>d||r.value=="bottom"&&m>l)&&(a.value=`linear-gradient(to ${r.value}, transparent, black ${o.maskLength}px, black calc(100% - ${o.maskLength}px), transparent);`),(r.value=="right"&&c-20>d||r.value=="bottom"&&s+l>=m)&&(a.value=`linear-gradient(to ${r.value}, transparent, black ${o.maskLength}px, black 100%, transparent);`),(r.value=="right"&&c==0||r.value=="bottom"&&s==0)&&(a.value=`linear-gradient(to ${r.value}, black calc(100% - ${o.maskLength}px), transparent 100%);`),(r.value=="right"&&d==n||r.value=="bottom"&&l==m)&&(a.value="none")}return G(()=>setTimeout(()=>t(),300)),(n,d)=>(u(),_(U(o.as||"div"),{ref_key:"scrollableDiv",ref:i,style:j(`maskImage: ${a.value}`),onScroll:t},{default:b(()=>[y(n.$slots,"default")]),_:3},40,["style"]))}};export{X as P,pe as _,ue as a};
//# sourceMappingURL=FadedScrollableDiv-5302c81a.js.map
