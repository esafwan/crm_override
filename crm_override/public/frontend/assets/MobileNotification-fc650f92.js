import{_ as x}from"./LayoutHeader-ce3efb9b.js";import{W as v}from"./WhatsAppIcon-67297c1d.js";import{M as b}from"./MarkAsDoneIcon-e6c436b2.js";import{n as l,N}from"./notifications-1372c14d.js";import{g as M,_ as w,a as B,t as C}from"./index-8340263f.js";import{o as $,a as I,r as u,b as o,c as s,d as n,w as c,e as a,u as r,F as p,f as L,t as _,g as m,n as z}from"./index-82d0b844.js";import{_ as A}from"./Breadcrumbs.vue_vue_type_script_setup_true_lang-cd1be04a.js";import"./Dropdown-f8d4a8c8.js";const D={class:"flex flex-col overflow-hidden"},R={key:0,class:"divide-y overflow-y-auto text-base"},S={class:"mt-1 flex items-center gap-2.5"},W=["innerHTML"],F={key:1,class:"mb-2 space-x-1 leading-5 text-gray-600"},H={class:"font-medium text-gray-900"},T={class:"font-medium text-gray-900"},V={class:"text-sm text-gray-600"},j={key:1,class:"flex flex-1 flex-col items-center justify-center gap-2"},E={class:"text-lg font-medium text-gray-500"},Z={__name:"MobileNotification",setup(U){const{$socket:d}=M();function g(e){l().mark_doc_as_read(e)}$(()=>{d.off("crm_notification")}),I(()=>{d.on("crm_notification",()=>{l().notifications.reload()})});function y(e){let i={leadId:e.reference_name};return e.route_name==="Deal"&&(i={dealId:e.reference_name}),{name:e.route_name,params:i,hash:"#"+e.comment||e.notification_type_doc}}return(e,i)=>{var f;const h=u("Button"),k=u("RouterLink");return o(),s(p,null,[n(x,null,{"left-header":c(()=>[n(r(A),{items:[{label:e.__("Notifications"),route:{name:"Notifications"}}]},null,8,["items"])]),"right-header":c(()=>[n(r(w),{text:e.__("Mark all as read")},{default:c(()=>[a("div",null,[n(h,{label:e.__("Mark all as read"),onClick:i[0]||(i[0]=()=>r(l)().mark_as_read.reload())},{prefix:c(()=>[n(b,{class:"h-4 w-4"})]),_:1},8,["label"])])]),_:1},8,["text"])]),_:1}),a("div",D,[(f=r(l)().allNotifications)!=null&&f.length?(o(),s("div",R,[(o(!0),s(p,null,L(r(l)().allNotifications,t=>(o(),m(k,{key:t.comment,to:y(t),class:"flex cursor-pointer items-start gap-3 px-2.5 py-3 hover:bg-gray-100",onClick:q=>g(t.comment||t.notification_type_doc)},{default:c(()=>[a("div",S,[a("div",{class:z(["size-[5px] rounded-full",[t.read?"bg-transparent":"bg-gray-900"]])},null,2),t.type=="WhatsApp"?(o(),m(v,{key:0,class:"size-7"})):(o(),m(B,{key:1,user:t.from_user.name,size:"lg"},null,8,["user"]))]),a("div",null,[t.notification_text?(o(),s("div",{key:0,innerHTML:t.notification_text},null,8,W)):(o(),s("div",F,[a("span",H,_(t.from_user.full_name),1),a("span",null,_(e.__("mentioned you in {0}",[t.reference_doctype])),1),a("span",T,_(t.reference_name),1)])),a("div",V,_(e.__(r(C)(t.creation))),1)])]),_:2},1032,["to","onClick"]))),128))])):(o(),s("div",j,[n(N,{class:"h-20 w-20 text-gray-300"}),a("div",E,_(e.__("No new notifications")),1)]))])],64)}}};export{Z as default};
//# sourceMappingURL=MobileNotification-fc650f92.js.map
