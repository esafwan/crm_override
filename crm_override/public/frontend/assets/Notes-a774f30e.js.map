{"version":3,"file":"Notes-a774f30e.js","sources":["../../../../frontend/src/pages/Notes.vue"],"sourcesContent":["<template>\n  <LayoutHeader>\n    <template #left-header>\n      <ViewBreadcrumbs v-model=\"viewControls\" routeName=\"Notes\" />\n    </template>\n    <template #right-header>\n      <Button variant=\"solid\" :label=\"__('Create')\" @click=\"createNote\">\n        <template #prefix><FeatherIcon name=\"plus\" class=\"h-4\" /></template>\n      </Button>\n    </template>\n  </LayoutHeader>\n  <ViewControls\n    ref=\"viewControls\"\n    v-model=\"notes\"\n    v-model:loadMore=\"loadMore\"\n    v-model:updatedPageCount=\"updatedPageCount\"\n    doctype=\"FCRM Note\"\n    :options=\"{\n      hideColumnsButton: true,\n      defaultViewName: __('Notes View'),\n    }\"\n  />\n  <div class=\"flex-1 overflow-y-auto\">\n    <div\n      v-if=\"notes.data?.data?.length\"\n      class=\"grid grid-cols-1 gap-2 px-3 pb-2 sm:grid-cols-4 sm:gap-4 sm:px-5 sm:pb-3\"\n    >\n      <div\n        v-for=\"note in notes.data.data\"\n        class=\"group flex h-56 cursor-pointer flex-col justify-between gap-2 rounded-lg border px-5 py-4 shadow-sm hover:bg-gray-50\"\n        @click=\"editNote(note)\"\n      >\n        <div class=\"flex items-center justify-between\">\n          <div class=\"truncate text-lg font-medium\">\n            {{ note.title }}\n          </div>\n          <Dropdown\n            :options=\"[\n              {\n                label: __('Delete'),\n                icon: 'trash-2',\n                onClick: () => deleteNote(note.name),\n              },\n            ]\"\n            @click.stop\n          >\n            <Button\n              icon=\"more-horizontal\"\n              variant=\"ghosted\"\n              class=\"hover:bg-white\"\n            />\n          </Dropdown>\n        </div>\n        <TextEditor\n          v-if=\"note.content\"\n          :content=\"note.content\"\n          :editable=\"false\"\n          editor-class=\"!prose-sm max-w-none !text-sm text-gray-600 focus:outline-none\"\n          class=\"flex-1 overflow-hidden\"\n        />\n        <div class=\"mt-2 flex items-center justify-between gap-2\">\n          <div class=\"flex items-center gap-2\">\n            <UserAvatar :user=\"note.owner\" size=\"xs\" />\n            <div class=\"text-sm text-gray-800\">\n              {{ getUser(note.owner).full_name }}\n            </div>\n          </div>\n          <Tooltip :text=\"dateFormat(note.modified, dateTooltipFormat)\">\n            <div class=\"text-sm text-gray-700\">\n              {{ __(timeAgo(note.modified)) }}\n            </div>\n          </Tooltip>\n        </div>\n      </div>\n    </div>\n  </div>\n  <ListFooter\n    v-if=\"notes.data?.data?.length\"\n    class=\"border-t px-3 py-2 sm:px-5\"\n    v-model=\"notes.data.page_length_count\"\n    :options=\"{\n      rowCount: notes.data.row_count,\n      totalCount: notes.data.total_count,\n    }\"\n    @loadMore=\"() => loadMore++\"\n  />\n  <div v-else class=\"flex h-full items-center justify-center\">\n    <div\n      class=\"flex flex-col items-center gap-3 text-xl font-medium text-gray-500\"\n    >\n      <NoteIcon class=\"h-10 w-10\" />\n      <span>{{ __('No {0} Found', [__('Notes')]) }}</span>\n      <Button :label=\"__('Create')\" @click=\"createNote\">\n        <template #prefix><FeatherIcon name=\"plus\" class=\"h-4\" /></template>\n      </Button>\n    </div>\n  </div>\n  <NoteModal\n    v-model=\"showNoteModal\"\n    v-model:reloadNotes=\"notes\"\n    :note=\"currentNote\"\n  />\n</template>\n\n<script setup>\nimport ViewBreadcrumbs from '@/components/ViewBreadcrumbs.vue'\nimport LayoutHeader from '@/components/LayoutHeader.vue'\nimport UserAvatar from '@/components/UserAvatar.vue'\nimport NoteIcon from '@/components/Icons/NoteIcon.vue'\nimport NoteModal from '@/components/Modals/NoteModal.vue'\nimport ViewControls from '@/components/ViewControls.vue'\nimport { usersStore } from '@/stores/users'\nimport { timeAgo, dateFormat, dateTooltipFormat } from '@/utils'\nimport { TextEditor, call, Dropdown, Tooltip, ListFooter } from 'frappe-ui'\nimport { ref, watch } from 'vue'\n\nconst { getUser } = usersStore()\n\nconst showNoteModal = ref(false)\nconst currentNote = ref(null)\n\nconst notes = ref({})\nconst loadMore = ref(1)\nconst updatedPageCount = ref(20)\nconst viewControls = ref(null)\n\nwatch(\n  () => notes.value?.data?.page_length_count,\n  (val, old_value) => {\n    if (!val || val === old_value) return\n    updatedPageCount.value = val\n  },\n)\n\nfunction createNote() {\n  currentNote.value = {\n    title: '',\n    content: '',\n  }\n  showNoteModal.value = true\n}\n\nfunction editNote(note) {\n  currentNote.value = note\n  showNoteModal.value = true\n}\n\nasync function deleteNote(name) {\n  await call('frappe.client.delete', {\n    doctype: 'FCRM Note',\n    name,\n  })\n  notes.value.reload()\n}\n</script>\n"],"names":["getUser","usersStore","showNoteModal","ref","currentNote","notes","loadMore","updatedPageCount","viewControls","watch","_b","_a","val","old_value","createNote","editNote","note","deleteNote","name","call"],"mappings":"25CAoHA,KAAM,CAAE,QAAAA,CAAS,EAAGC,EAAY,EAE1BC,EAAgBC,EAAI,EAAK,EACzBC,EAAcD,EAAI,IAAI,EAEtBE,EAAQF,EAAI,EAAE,EACdG,EAAWH,EAAI,CAAC,EAChBI,EAAmBJ,EAAI,EAAE,EACzBK,EAAeL,EAAI,IAAI,EAE7BM,EACE,aAAM,OAAAC,GAAAC,EAAAN,EAAM,QAAN,YAAAM,EAAa,OAAb,YAAAD,EAAmB,mBACzB,CAACE,EAAKC,IAAc,CACd,CAACD,GAAOA,IAAQC,IACpBN,EAAiB,MAAQK,EAC1B,CACH,EAEA,SAASE,GAAa,CACpBV,EAAY,MAAQ,CAClB,MAAO,GACP,QAAS,EACV,EACDF,EAAc,MAAQ,EACxB,CAEA,SAASa,EAASC,EAAM,CACtBZ,EAAY,MAAQY,EACpBd,EAAc,MAAQ,EACxB,CAEA,eAAee,EAAWC,EAAM,CAC9B,MAAMC,EAAK,uBAAwB,CACjC,QAAS,YACT,KAAAD,CACJ,CAAG,EACDb,EAAM,MAAM,OAAQ,CACtB"}