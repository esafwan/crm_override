{"version":3,"file":"organizations-c51d501b.js","sources":["../../../../frontend/src/stores/organizations.js"],"sourcesContent":["import { defineStore } from 'pinia'\nimport { createResource } from 'frappe-ui'\nimport { reactive } from 'vue'\n\nexport const organizationsStore = defineStore('crm-organizations', () => {\n  let organizationsByName = reactive({})\n\n  const organizations = createResource({\n    url: 'crm.api.session.get_organizations',\n    cache: 'organizations',\n    initialData: [],\n    auto: true,\n    transform(organizations) {\n      for (let organization of organizations) {\n        organizationsByName[organization.name] = organization\n      }\n      return organizations\n    },\n    onError(error) {\n      if (error && error.exc_type === 'AuthenticationError') {\n        router.push('/login')\n      }\n    },\n  })\n\n  function getOrganization(name) {\n    return organizationsByName[name]\n  }\n\n  return {\n    organizations,\n    getOrganization,\n  }\n})\n"],"names":["organizationsStore","defineStore","organizationsByName","reactive","organizations","createResource","organization","error","getOrganization","name"],"mappings":"uDAIY,MAACA,EAAqBC,EAAY,oBAAqB,IAAM,CACvE,IAAIC,EAAsBC,EAAS,EAAE,EAErC,MAAMC,EAAgBC,EAAe,CACnC,IAAK,oCACL,MAAO,gBACP,YAAa,CAAE,EACf,KAAM,GACN,UAAUD,EAAe,CACvB,QAASE,KAAgBF,EACvBF,EAAoBI,EAAa,IAAI,EAAIA,EAE3C,OAAOF,CACR,EACD,QAAQG,EAAO,CACTA,GAASA,EAAM,WAAa,uBAC9B,OAAO,KAAK,QAAQ,CAEvB,CACL,CAAG,EAED,SAASC,EAAgBC,EAAM,CAC7B,OAAOP,EAAoBO,CAAI,CAChC,CAED,MAAO,CACL,cAAAL,EACA,gBAAAI,CACD,CACH,CAAC"}